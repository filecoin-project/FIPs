---
fip: "0035"
title: task scheduling optimization
author: hunter (@hunter), carry (@carry)
discussions-to: https://github.com/filecoin-project/FIPs/issues/35  
status: Active
type: Technical
created: 2022-05-19
---

## Simple Summary

* Optimize parallel PreCommit1 tasks according to hardware configuration
* Quantity can improve overall task completion speed.

## Problem Motivation
In the scheduling of the official project, there is no limit to the number of PreCommit1 tasks that a worker can run at the same time. The maximum number depends on the hardware configuration, including the number of CPU cores, available memory, and hard disk space.
Since there is no precise limit, the worker can execute when it receives too many tasks, but it cannot fully exert its computing performance. It can reasonably control the parallel PreCommit1 tasks according to the hardware configuration.
Quantity can improve overall task completion speed.

## Specification
Add the --parallel-p1-limit parameter when the worker starts to set the maximum number of PreCommit1 tasks it can accept. When the miner schedules the PreCommit1 task to the worker, it will record the
The number assigned to it, when the number of assigned tasks is equal to the set maximum number of tasks, no new PreCommit1 tasks will be assigned to it, and will not be assigned again until a PreCommit1 task is executed.

The default value of the --parallel-p1-limit parameter is -1, which means no limit, and if the value of --parallel-p1-limit exceeds the maximum number of tasks that the worker hardware configuration can receive
won't work either.
When viewing worker information through lotus-miner sealing workers, the task number information of PreCommit1 will be displayed, as follows:
p1_limit: 15-7, 15 represents the value set by --parallel-p1-limit, 7 represents the number of PreCommit1 tasks currently running.

## Test Cases
N/A

## Implementation
https://github.com/filecoin-project/specs-actors/pull/1181

## Security Considerations

Provides the maximum number of PreCommit1 tasks, which will not bring security issues to the project
## Incentive Considerations
The number of PreCommit1 tasks can be configured, which will directly help improve the computing speed and activate the community ecology.

## Product Considerations
Through the param settings of the PreCommit1 task, the device can operate according to the optimized configuration of the device, achieve the most reasonable device configuration goal, and use the device function to configure the largest different functions to obtain the best operating effect.

## Copyright
N/A
